var Ye=Object.defineProperty,Xe=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var fe=(e,t,l)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,F=(e,t)=>{for(var l in t||(t={}))Je.call(t,l)&&fe(e,l,t[l]);if(he)for(var l of he(t))qe.call(t,l)&&fe(e,l,t[l]);return e},te=(e,t)=>Xe(e,ze(t));var ye=(e,t,l)=>new Promise((p,C)=>{var x=y=>{try{o(l.next(y))}catch(b){C(b)}},s=y=>{try{o(l.throw(y))}catch(b){C(b)}},o=y=>y.done?p(y.value):Promise.resolve(y.value).then(x,s);o((l=l.apply(e,t)).next())});import{ey as Ge,ez as We,eA as Qe,eB as Ze,eC as et,eD as tt,e3 as nt,e9 as pe,eE as lt,eF as st,eG as at,eH as ct,b as re,i as q,eI as rt,B as it,O as $,Q as P,o as M,c as U,D as i,T as ot,s as O,y as ne,z as R,X as ge,Y as ke,Z as ut,n as xe,f as S,eJ as dt,F as G,q as ht,dM as ft,a3 as yt,a4 as pt,eK as gt,d0 as J,bR as W,d9 as kt,dY as xt,ca as St,eL as bt,dy as vt,c0 as ae,eM as Se,m as Te,j as Kt,p as we,J as Be,eN as Ct,eO as Lt,a5 as At,a7 as be,a9 as z,bP as _t,a0 as Et,a1 as le,eP as mt,ei as Tt,C as H,eQ as wt,I as Bt,cX as It,w as ve,x as Ke,S as Dt,A as Mt,d_ as Ce,eR as $t,bV as Le,b$ as Ft}from"./index.7e254f9c.js";import{f as Nt}from"./fromPairs.2341303e.js";import{b as Ot}from"./index.82f1cbb7.js";import{D as Pt}from"./index.f1cc46cb.js";import{g as jt}from"./get.99d90fe8.js";var Ut=200;function Rt(e,t,l,p){var C=-1,x=Ze,s=!0,o=e.length,y=[],b=t.length;if(!o)return y;l&&(t=Ge(t,We(l))),p?(x=et,s=!1):t.length>=Ut&&(x=tt,s=!1,t=new Qe(t));e:for(;++C<o;){var k=e[C],r=l==null?k:l(k);if(k=p||k!==0?k:0,s&&r===r){for(var n=b;n--;)if(t[n]===r)continue e;y.push(k)}else x(t,r,p)||y.push(k)}return y}var Ht=nt(function(e,t){return pe(e)?Rt(e,lt(t,1,pe,!0)):[]}),Vt=Ht;function ce(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((l,p)=>l+ce(e,p),""):Object.keys(t).reduce((l,p)=>l+(t[p]?ce(e,p):""),""):""}function Yt(e){return(t,l)=>(t&&typeof t!="string"&&(l=t,t=""),t=t?`${e}__${t}`:e,`${t}${ce(t,l)}`)}function Ie(e){return[Yt(`${st}-${e}`)]}const Ae=Symbol(),_e=Symbol();function Xt(e,t){if(!at(e)||!!e[_e])return e;const{values:l,required:p,default:C,type:x,validator:s}=e,o=l||s?y=>{let b=!1,k=[];if(l&&(k=[...l,C],b||(b=k.includes(y))),s&&(b||(b=s(y))),!b&&k.length>0){const r=[...new Set(k)].map(n=>JSON.stringify(n)).join(", ");ct(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${r}], got value ${JSON.stringify(y)}.`)}return b}:void 0;return{type:typeof x=="object"&&Object.getOwnPropertySymbols(x).includes(Ae)?x[Ae]:x,required:!!p,default:C,validator:o,[_e]:!0}}const zt=e=>Nt(Object.entries(e).map(([t,l])=>[t,Xt(l,t)]));var m=(e=>(e[e.SELECT_ALL=0]="SELECT_ALL",e[e.UN_SELECT_ALL=1]="UN_SELECT_ALL",e[e.EXPAND_ALL=2]="EXPAND_ALL",e[e.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",e[e.CHECK_STRICTLY=4]="CHECK_STRICTLY",e[e.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY",e))(m||{});const Jt=["update:expandedKeys","update:selectedKeys","update:value","change","check","update:searchValue"],qt=zt({value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:Boolean,search:Boolean,searchValue:{type:String,default:""},checkStrictly:Boolean,clickRowToExpand:{type:Boolean,default:!1},checkable:Boolean,defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:Boolean,fieldNames:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:void 0},rightMenuList:{type:Array},filterFn:{type:Function,default:void 0},highlight:{type:[Boolean,String],default:!1},expandOnSearch:Boolean,checkOnSearch:Boolean,selectedOnSearch:Boolean,loading:{type:Boolean,default:!1}}),Gt={key:2,class:"flex items-center flex-1 cursor-pointer justify-self-stretch"},Wt=re({__name:"TreeHeader",props:{helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},search:{type:Boolean,default:!1},searchText:{type:String,default:""},checkAll:{type:Function,default:void 0},expandAll:{type:Function,default:void 0}},emits:["strictly-change","search"],setup(e,{emit:t}){const l=e,p=q(""),[C]=Ie("tree-header"),x=rt(),{t:s}=it(),o=$(()=>{const n=x.headerTitle||l.title;return["mr-1","w-full",{["ml-5"]:n}]}),y=$(()=>{const{checkable:n}=l,a=[{label:s("component.tree.expandAll"),value:m.EXPAND_ALL},{label:s("component.tree.unExpandAll"),value:m.UN_EXPAND_ALL,divider:n}];return n?[{label:s("component.tree.selectAll"),value:m.SELECT_ALL},{label:s("component.tree.unSelectAll"),value:m.UN_SELECT_ALL,divider:n},...a,{label:s("component.tree.checkStrictly"),value:m.CHECK_STRICTLY},{label:s("component.tree.checkUnStrictly"),value:m.CHECK_UN_STRICTLY}]:a});function b(n){var u,d,h,f;const{key:a}=n;switch(a){case m.SELECT_ALL:(u=l.checkAll)==null||u.call(l,!0);break;case m.UN_SELECT_ALL:(d=l.checkAll)==null||d.call(l,!1);break;case m.EXPAND_ALL:(h=l.expandAll)==null||h.call(l,!0);break;case m.UN_EXPAND_ALL:(f=l.expandAll)==null||f.call(l,!1);break;case m.CHECK_STRICTLY:t("strictly-change",!1);break;case m.CHECK_UN_STRICTLY:t("strictly-change",!0);break}}function k(n){t("search",n)}const r=St(k,200);return P(()=>p.value,n=>{r(n)}),P(()=>l.searchText,n=>{n!==p.value&&(p.value=n)}),(n,a)=>(M(),U("div",{class:xe([i(C)(),"flex px-2 py-1.5 items-center"])},[i(x).headerTitle?ot(n.$slots,"headerTitle",{key:0}):O("",!0),!i(x).headerTitle&&n.title?(M(),ne(i(ut),{key:1,helpMessage:n.helpMessage},{default:R(()=>[ge(ke(n.title),1)]),_:1},8,["helpMessage"])):O("",!0),n.search||n.toolbar?(M(),U("div",Gt,[n.search?(M(),U("div",{key:0,class:xe(i(o))},[S(i(dt),{placeholder:i(s)("common.searchText"),size:"small",allowClear:"",value:p.value,"onUpdate:value":a[0]||(a[0]=u=>p.value=u)},null,8,["placeholder","value"])],2)):O("",!0),n.toolbar?(M(),ne(i(xt),{key:1,onClick:a[1]||(a[1]=kt(()=>{},["prevent"]))},{overlay:R(()=>[S(i(J),{onClick:b},{default:R(()=>[(M(!0),U(G,null,ht(i(y),u=>(M(),U(G,{key:u.value},[S(i(ft),yt(pt({key:u.value})),{default:R(()=>[ge(ke(u.label),1)]),_:2},1040),u.divider?(M(),ne(i(gt),{key:0})):O("",!0)],64))),128))]),_:1})]),default:R(()=>[S(i(W),{icon:"ion:ellipsis-vertical"})]),_:1})):O("",!0)])):O("",!0)],2))}}),Qt=({icon:e})=>e?bt(e)?vt(W,{icon:e,class:"mr-1"}):W:null;function Zt(e,t){function l(r){const n=[],a=r||i(e),{key:u,children:d}=i(t);if(!d||!u)return n;for(let h=0;h<a.length;h++){const f=a[h];n.push(f[u]);const v=f[d];v&&v.length&&n.push(...l(v))}return n}function p(r){const n=[],a=r||i(e),{key:u,children:d}=i(t);if(!d||!u)return n;for(let h=0;h<a.length;h++){const f=a[h];f.disabled!==!0&&f.selectable!==!1&&n.push(f[u]);const v=f[d];v&&v.length&&n.push(...p(v))}return n}function C(r,n){const a=[],u=n||i(e),{key:d,children:h}=i(t);if(!h||!d)return a;for(let f=0;f<u.length;f++){const v=u[f],E=v[h];r===v[d]?(a.push(v[d]),E&&E.length&&a.push(...l(E))):E&&E.length&&a.push(...C(r,E))}return a}function x(r,n,a){if(!r)return;const u=a||i(e),{key:d,children:h}=i(t);if(!(!h||!d))for(let f=0;f<u.length;f++){const v=u[f],E=v[h];if(v[d]===r){u[f]=F(F({},u[f]),n);break}else E&&E.length&&x(r,n,v[h])}}function s(r=1,n,a=1){if(!r)return[];const u=[],d=n||i(e)||[];for(let h=0;h<d.length;h++){const f=d[h],{key:v,children:E}=i(t),Q=v?f[v]:"",j=E?f[E]:[];u.push(Q),j&&j.length&&a<r&&(a+=1,u.push(...s(r,j,a)))}return u}function o({parentKey:r=null,node:n,push:a="push"}){const u=ae(i(e));if(!r){u[a](n),e.value=u;return}const{key:d,children:h}=i(t);!h||!d||(Se(u,f=>{if(f[d]===r)return f[h]=f[h]||[],f[h][a](n),!0}),e.value=u)}function y({parentKey:r=null,list:n,push:a="push"}){const u=ae(i(e));if(!(!n||n.length<1))if(r){const{key:d,children:h}=i(t);if(!h||!d)return;Se(u,f=>{if(f[d]===r){f[h]=f[h]||[];for(let v=0;v<n.length;v++)f[h][a](n[v]);return e.value=u,!0}})}else for(let d=0;d<n.length;d++)u[a](n[d])}function b(r,n){if(!r)return;const a=n||i(e),{key:u,children:d}=i(t);if(!(!d||!u))for(let h=0;h<a.length;h++){const f=a[h],v=f[d];if(f[u]===r){a.splice(h,1);break}else v&&v.length&&b(r,f[d])}}function k(r,n,a){return!r&&r!==0?null:((n||i(e)).forEach(d=>{if((a==null?void 0:a.key)||(a==null?void 0:a.key)===0)return a;if(d.key===r){a=d;return}d.children&&d.children.length&&(a=k(r,d.children,a))}),a||null)}return{deleteNodeByKey:b,insertNodeByKey:o,insertNodesByKey:y,filterByLevel:s,updateNodeByKey:x,getAllKeys:l,getChildrenKeys:C,getEnabledKeys:p,getSelectedNode:k}}function en(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Be(e)}const se="context-menu",tn={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},Ee=e=>{const{item:t}=e;return S("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&S(W,{class:"mr-2",icon:t.icon},null),S("span",null,[t.label])])};var nn=re({name:"ContextMenu",props:tn,setup(e){const t=q(null),l=q(!1),p=$(()=>{const{axis:s,items:o,styles:y,width:b}=e,{x:k,y:r}=s||{x:0,y:0},n=(o||[]).length*40,a=b,u=document.body,d=u.clientWidth<k+a?k-a:k,h=u.clientHeight<r+n?r-n:r;return te(F({},y),{position:"absolute",width:`${b}px`,left:`${d+1}px`,top:`${h+1}px`,zIndex:9999})});Te(()=>{Kt(()=>l.value=!0)}),we(()=>{const s=i(t);s&&document.body.removeChild(s)});function C(s,o){const{handler:y,disabled:b}=s;b||(l.value=!1,o==null||o.stopPropagation(),o==null||o.preventDefault(),y==null||y())}function x(s){return s.filter(y=>!y.hidden).map(y=>{const{disabled:b,label:k,children:r,divider:n=!1}=y,a={item:y,handler:C,showIcon:e.showIcon};return!r||r.length===0?S(G,null,[S(J.Item,{disabled:b,class:`${se}__item`,key:k},{default:()=>[S(Ee,a,null)]}),n?S(Pt,{key:`d-${k}`},null):null]):i(l)?S(J.SubMenu,{key:k,disabled:b,popupClassName:`${se}__popup`},{title:()=>S(Ee,a,null),default:()=>x(r)}):null})}return()=>{let s;if(!i(l))return null;const{items:o}=e;return S("div",{class:se},[S(J,{inlineIndent:12,mode:"vertical",ref:t,style:i(p)},en(s=x(o))?s:{default:()=>[s]})])}}});const N={domList:[],resolve:()=>{}},ln=function(e){const{event:t}=e||{};if(t&&(t==null||t.preventDefault()),!!Ct)return new Promise(l=>{const p=document.body,C=document.createElement("div"),x={};e.styles&&(x.styles=e.styles),e.items&&(x.items=e.items),e.event&&(x.customEvent=t,x.axis={x:t.clientX,y:t.clientY});const s=S(nn,x);Lt(s,C);const o=function(){N.resolve("")};N.domList.push(C);const y=function(){N.domList.forEach(b=>{try{b&&p.removeChild(b)}catch(k){}}),p.removeEventListener("click",o),p.removeEventListener("scroll",o)};N.resolve=function(b){y(),l(b)},y(),p.appendChild(C),p.addEventListener("click",o),p.addEventListener("scroll",o)})},me=function(){N&&(N.resolve(""),N.domList=[])};function sn(e=!0){return At()&&e&&we(()=>{me()}),[ln,me]}function an(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Be(e)}var fn=re({name:"BasicTree",inheritAttrs:!1,props:qt,emits:Jt,setup(e,{attrs:t,slots:l,emit:p,expose:C}){const[x]=Ie("tree"),s=be({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),o=be({startSearch:!1,searchText:"",searchData:[]}),y=q([]),[b]=sn(),k=$(()=>{const{fieldNames:c}=e;return F({children:"children",title:"title",key:"key"},c)}),r=$(()=>{let c=te(F(F({blockNode:!0},t),e),{expandedKeys:s.expandedKeys,selectedKeys:s.selectedKeys,checkedKeys:s.checkedKeys,checkStrictly:s.checkStrictly,fieldNames:i(k),"onUpdate:expandedKeys":g=>{s.expandedKeys=g,p("update:expandedKeys",g)},"onUpdate:selectedKeys":g=>{s.selectedKeys=g,p("update:selectedKeys",g)},onCheck:(g,L)=>{let K=z(s.checkedKeys);if(_t(K)&&o.startSearch){const{key:_}=i(k);K=Vt(K,Q(L.node.$attrs.node[_])),L.checked&&K.push(L.node.$attrs.node[_]),s.checkedKeys=K}else s.checkedKeys=g;const A=z(s.checkedKeys);p("update:value",A),p("check",A,L)},onRightClick:$e});return Et(c,"treeData","class")}),n=$(()=>o.startSearch?o.searchData:i(y)),a=$(()=>!n.value||n.value.length===0),{deleteNodeByKey:u,insertNodeByKey:d,insertNodesByKey:h,filterByLevel:f,updateNodeByKey:v,getAllKeys:E,getChildrenKeys:Q,getEnabledKeys:j,getSelectedNode:De}=Zt(y,k);function Me(c,g){return!g&&e.renderIcon&&le(e.renderIcon)?e.renderIcon(c):g}function $e(L){return ye(this,arguments,function*({event:c,node:g}){var B;const{rightMenuList:K=[],beforeRightClick:A}=e;let _={event:c,items:[]};if(A&&le(A)){let T=yield A(g,c);Array.isArray(T)?_.items=T:Object.assign(_,T)}else _.items=K;!((B=_.items)!=null&&B.length)||(_.items=_.items.filter(T=>!T.hidden),b(_))})}function V(c){s.expandedKeys=c}function Fe(){return s.expandedKeys}function ie(c){s.selectedKeys=c}function Ne(){return s.selectedKeys}function oe(c){s.checkedKeys=c}function Oe(){return s.checkedKeys}function ue(c){s.checkedKeys=c?j():[]}function Z(c){s.expandedKeys=c?E():[]}function Pe(c){s.checkStrictly=c}P(()=>e.searchValue,c=>{c!==o.searchText&&(o.searchText=c)},{immediate:!0}),P(()=>e.treeData,c=>{c&&ee(o.searchText)});function ee(c){if(c!==o.searchText&&(o.searchText=c),p("update:searchValue",c),!c){o.startSearch=!1;return}const{filterFn:g,checkable:L,expandOnSearch:K,checkOnSearch:A,selectedOnSearch:_}=i(e);o.startSearch=!0;const{title:B,key:T}=i(k),I=[];if(o.searchData=mt(i(y),w=>{var Y,X;const D=g?g(c,w,i(k)):(X=(Y=w[B])==null?void 0:Y.includes(c))!=null?X:!1;return D&&I.push(w[T]),D},i(k)),K){const w=Tt(o.searchData).map(D=>D[T]);w&&w.length&&V(w)}A&&L&&I.length&&oe(I),_&&I.length&&ie(I)}function je(c,g){if(!(!e.clickRowToExpand||!g||g.length===0))if(!s.expandedKeys.includes(c))V([...s.expandedKeys,c]);else{const L=[...s.expandedKeys],K=L.findIndex(A=>A===c);K!==-1&&L.splice(K,1),V(L)}}H(()=>{y.value=e.treeData}),Te(()=>{const c=parseInt(e.defaultExpandLevel);c>0?s.expandedKeys=f(c):e.defaultExpandAll&&Z(!0)}),H(()=>{s.expandedKeys=e.expandedKeys}),H(()=>{s.selectedKeys=e.selectedKeys}),H(()=>{s.checkedKeys=e.checkedKeys}),P(()=>e.value,()=>{s.checkedKeys=z(e.value||[])},{immediate:!0}),P(()=>s.checkedKeys,()=>{const c=z(s.checkedKeys);p("update:value",c),p("change",c)}),H(()=>{s.checkStrictly=e.checkStrictly});const Ue={setExpandedKeys:V,getExpandedKeys:Fe,setSelectedKeys:ie,getSelectedKeys:Ne,setCheckedKeys:oe,getCheckedKeys:Oe,insertNodeByKey:d,insertNodesByKey:h,deleteNodeByKey:u,updateNodeByKey:v,getSelectedNode:De,checkAll:ue,expandAll:Z,filterByLevel:c=>{s.expandedKeys=f(c)},setSearchValue:c=>{ee(c)},getSearchValue:()=>o.searchText};function Re(c){const{actionList:g}=e;if(!(!g||g.length===0))return g.map((L,K)=>{var _;let A=!0;return le(L.show)?A=(_=L.show)==null?void 0:_.call(L,c):Le(L.show)&&(A=L.show),A?S("span",{key:K,class:x("action")},[L.render(c)]):null})}const He=$(()=>{const c=ae(n.value);return wt(c,(g,L)=>{var de;const K=o.searchText,{highlight:A}=i(e),{title:_,key:B,children:T}=i(k),I=Me(g,g.icon),w=jt(g,_),D=K?w.indexOf(K):-1,Y=o.startSearch&&!$t(K)&&A&&D!==-1,X=`color: ${Le(A)?"#f50":A}`,Ve=Y?S("span",{class:(de=i(r))!=null&&de.blockNode?`${x("content")}`:""},[S("span",null,[w.substr(0,D)]),S("span",{style:X},[K]),S("span",null,[w.substr(D+K.length)])]):w;return g[_]=S("span",{class:`${x("title")} pl-2`,onClick:je.bind(null,g[B],g[T])},[l!=null&&l.title?Ft(l,"title",g):S(G,null,[I&&S(Qt,{icon:I},null),Ve,S("span",{class:x("actions")},[Re(g)])])]),g}),c});return C(Ue),()=>{let c;const{title:g,helpMessage:L,toolbar:K,search:A,checkable:_}=e,B=g||K||A||l.headerTitle,T={height:"calc(100% - 38px)"};return S("div",{class:[x(),"h-full",t.class]},[B&&S(Wt,{checkable:_,checkAll:ue,expandAll:Z,title:g,search:A,toolbar:K,helpMessage:L,onStrictlyChange:Pe,onSearch:ee,searchText:o.searchText},an(c=Bt(l))?c:{default:()=>[c]}),S(It,{spinning:i(e.loading),tip:"\u52A0\u8F7D\u4E2D..."},{default:()=>[ve(S(Dt,{style:T},{default:()=>[S(Ot,Mt(i(r),{showIcon:!1,treeData:He.value}),null)]}),[[Ke,!i(a)]]),ve(S(Ce,{image:Ce.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[Ke,i(a)]])]})])}}});export{fn as _};
